{% load static %}

<div class="fr-input-group {% if form_input.errors %}fr-select-group--error{% endif %}">
    {% if label %}
        <label class="fr-label" for="{{form_input.id_for_label}}">
            {{ label }}
            {% include "common/mandatory_field.html" with form_input=form_input %}
        </label>
    {% endif %}
    <div class="fr-mt-1w block--row-strech" id="{{form_input.id_for_label}}_div">
        <input
            class="fr-input {% if form_input.errors %}fr-input--error{% endif %}"
            aria-describedby="text-input-error-desc-error"
            type="text"
            id="{{form_input.id_for_label}}"
            name="{{form_input.html_name}}"
            value="{{ form_input.value|default_if_none:'' }}"
            {% if not editable %}disabled{% endif %}>
        {% if object_field %}
            <div id='{{form_input.id_for_label}}_comment' hidden>
                <div class="content__icons fr-px-1w"
                    id="{{form_input.id_for_label}}_comment-img"
                    data-fr-opened="false"
                    aria-controls="{{form_input.id_for_label}}_comment-dialog">
                    <svg role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-labelledby="chatIconTitle">
                        <title id="chatIconTitle">{% for comment in comments|get_item:object_field%}{{ comment.message }}{% endfor %}</title>
                        <path d="M8.82388455,18.5880577 L4,21 L4.65322944,16.4273939 C3.00629211,15.0013 2,13.0946628 2,11 C2,6.581722 6.4771525,3 12,3 C17.5228475,3 22,6.581722 22,11 C22,15.418278 17.5228475,19 12,19 C10.8897425,19 9.82174472,18.8552518 8.82388455,18.5880577 Z"></path>
                    </svg>
                </div>
            </div>
        {% endif %}
    </div>
    {% for error in form_input.errors %}
        <p id="text-input-error-desc-error" class="fr-error-text">
            {{ error }}
        </p>
    {% endfor %}
</div>

{% include "common/comment_dialog.html" with form_input=form_input convention=convention object_field=object_field comments=comments %}


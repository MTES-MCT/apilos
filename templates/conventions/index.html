{% extends "layout/base.html" %}

{% load static %}

{% load custom_filters %}

{% block page_title %}Conventions - APiLos{% endblock %}

{% block javascript_extras %}
    <script src="{% static "virtual-select/virtual-select.min.js" %}" nonce="{{request.csp_nonce}}"></script>
{% endblock %}

{% block css_extras %}
    <link rel="stylesheet"
        href="{% static 'virtual-select/virtual-select.min.css' %}">
{% endblock %}

{% block content %}
    {% if total_conventions > 0 %}
        <div class="fr-container-fluid ds_banner">
            <div class="fr-container">{% include "./_partial/search_header.html" %}</div>
            <div class="fr-container-fluid">{% include "./_partial/tabs.html" %}</div>
        </div>

        {% include "conventions/convention_list.html" %}

        <div class="fr-container-fluid">
            <div class="fr-container">
                <div class="fr-grid-row fr-grid-row--gutters fr-grid-row--center">
                    <div class="fr-my-5w">
                        <a class="fr-btn fr-icon-add-line fr-btn--icon-left"
                            href="{% url 'conventions:new_convention' %}">Cr√©er une convention ANRU</a>
                    </div>
                </div>
            </div>
        </div>
    {% else %}
        {% if request|is_bailleur %}
            {% if CERBERE_AUTH %}
                {% include "conventions/home/bailleur_cerbere_no_convention.html" %}
            {% else %}
                {% include "conventions/home/bailleur_no_convention.html" %}
            {% endif %}
        {% elif  request|is_instructeur %}
            {% if CERBERE_AUTH %}
                {% include "conventions/home/instructeur_cerbere_no_convention.html" %}
            {% else %}
                {% include "conventions/home/instructeur_no_convention.html" %}
            {% endif %}
        {% else %}
            {% include "conventions/home/bailleur_no_convention.html" %}
        {% endif %}
    {% endif %}
{% endblock %}
